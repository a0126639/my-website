<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>蚤激安寄賣小舖</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2506175077128539"
     crossorigin="anonymous"></script>

  <style>
    /* =========================================
       ★ 尺寸調整區 ★
       ========================================= */
    :root {
      --nav-height: 60px; 
      --right-sidebar-width: 300px;
      --content-min-height: 600px;
      /* 設定網頁最小寬度，防止版面變形 */
      --min-page-width: 1024px; 
    }

    .custom-nav-height { min-height: var(--nav-height); }
    .custom-right-width { width: var(--right-sidebar-width); }
    .custom-main-height { min-height: var(--content-min-height); }
    
    /* 強制網頁有最小寬度 */
    body { min-width: var(--min-page-width); }

    .prose p { line-height: 1.6; color: #374151; }
    .loading { color: #6b7280; font-style: italic; }
    
    .nav-active { 
      border-bottom: 3px solid #4f46e5; 
      color: #4f46e5; 
      font-weight: bold;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col">

  <nav id="top-nav-container" class="bg-white shadow-sm sticky top-0 z-20 custom-nav-height">
    <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between">
      <div class="font-bold text-xl mr-8 text-indigo-600 shrink-0">蚤激安寄賣小舖</div>
      
      <div id="nav-list" class="flex flex-1 gap-4 overflow-x-auto h-full items-center">
        </div>
      
      <div class="text-xs text-gray-400 ml-4 shrink-0">
         歡迎光臨
      </div>
    </div>
  </nav>

  <div class="max-w-7xl mx-auto px-4 py-6 w-full flex gap-6">
    
    <main id="content" class="bg-white rounded-2xl shadow p-6 flex-1 custom-main-height">
      <header class="flex items-start justify-between gap-4 border-b pb-4 mb-4">
        <div>
          <h2 id="content-title" class="text-2xl font-bold">標題</h2>
        </div>
      </header>

      <section id="content-body" class="prose max-w-none">
        </section>
    </main>

    <aside class="custom-right-width flex-shrink-0">
      <div class="space-y-6 sticky top-20"> 

         <div class="bg-white rounded-2xl shadow-sm p-4 text-sm">
          <div class="font-semibold text-gray-400 text-xs mb-2">贊助廣告</div>
          <div class="bg-gray-50 border border-dashed border-gray-300 rounded-lg w-full h-[250px] flex items-center justify-center text-gray-400 overflow-hidden">
             <div class="text-center px-2">
               Google Ad 區塊
             </div>
          </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-sm p-4 text-sm">
          <div class="font-semibold text-gray-400 text-xs mb-2">店內推薦</div>
          <a href="#" target="_blank" class="block group hover:opacity-80 transition-opacity">
              <img src="docs/CAT.jpg" alt="店內廣告" class="w-full h-auto rounded shadow-sm">
          </a>
        </div>

        <div class="bg-white rounded-2xl shadow-sm p-4 text-sm">
          <div class="font-semibold mb-3 border-b pb-2">最近貼文</div>
          <div class="w-full overflow-hidden flex justify-center">
            <iframe 
              src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2Fpermalink.php%3Fstory_fbid%3Dpfbid02DRULyD5VGhqwobSDcAddT4upuxi6hgEx6GHjyN9Hb7Jn9u6H8RUb6Adfs1HCP6wil%26id%3D61571238674713&show_text=true&width=300" 
              width="100%" 
              height="500" 
              style="border:none;overflow:hidden" 
              scrolling="no" 
              frameborder="0" 
              allowfullscreen="true" 
              allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share">
            </iframe>
          </div>
        </div>

      </div>
    </aside>
  </div>

  <footer class="bg-white mt-auto border-t py-6 text-center text-sm text-gray-500">
    © <span id="year"></span> 蚤激安寄賣小舖 - All Rights Reserved.
  </footer>

  <div id="floating-ad" class="fixed bottom-4 right-4 z-50 flex flex-col items-end transition-transform duration-300 translate-y-0">
    <button onclick="closeAd()" class="mb-2 bg-gray-800 text-white rounded-full w-8 h-8 flex items-center justify-center shadow hover:bg-gray-600 text-xs">
      ✕
    </button>
    <a href="https://line.me/R/ti/p/@041ypvvx?oat_content=qr" target="_blank" class="block bg-white p-2 rounded-lg shadow-xl border border-gray-200 hover:scale-105 transition-transform">
       <div class="w-40 text-center">
        <p class="text-sm font-bold text-indigo-600">加 LINE 預約</p>
        </div>
    </a>
  </div>

  <script>
    // --- 資料設定 ---
    const links = [
      { 
        id: 'login', 
        label: '登入', 
        isExternal: true, 
        url: 'https://www.jljh.com.tw/usedcust/index.php?t=1&npg=' 
      },
      { 
        id: 'announcement', 
        label: '最新公告', 
        summary: '最新消息與店舖公告。' 
      },
      { id: 'about', label: '關於我們', summary: '關於本網站的背景故事。' },
      { id: 'rule', label: '寄賣須知', summary: '寄賣規則條件須知。' },
      { id: 'contact', label: '聯絡我們', summary: '聯絡方式資訊。' },
    ];

    const navList = document.getElementById('nav-list');
    const contentTitle = document.getElementById('content-title');
    const contentBody = document.getElementById('content-body');
    document.getElementById('year').textContent = new Date().getFullYear();

    let activeId = 'announcement'; // 預設顯示

    // --- 產生按鈕 ---
    function renderNav() {
      navList.innerHTML = '';

      links.forEach(link => {
        const btn = document.createElement('button');
        btn.className = 'px-3 py-2 text-sm font-medium transition-all hover:text-indigo-600 h-full border-b-2 border-transparent shrink-0';
        btn.textContent = link.label;

        if (activeId === link.id && !link.isExternal) {
          btn.classList.add('nav-active');
        } else {
          btn.classList.add('text-gray-600');
        }
        
        btn.addEventListener('click', () => handleClick(link));
        navList.appendChild(btn);
      });
    }

    // --- 點擊邏輯 ---
    function handleClick(link) {
      if (link.isExternal) {
        window.open(link.url, '_blank');
      } else {
        activeId = link.id;
        updateContent();
        renderNav();
      }
    }

    // --- 更新內容 ---
    function updateContent() {
      const item = links.find(l => l.id === activeId);
      if (!item) return;

      contentTitle.textContent = item.label;
      contentBody.innerHTML = '<p class="loading">資料讀取中...</p>';

      // 如果是這些頁面，讀取外部 HTML 檔案
      if (['announcement', 'about', 'rule', 'contact'].includes(item.id)) {
        
        const fileName = item.id + '.html'; 

        fetch(fileName)
          .then(res => {
            if(!res.ok) throw new Error('Missing file');
            return res.text();
          })
          .then(html => contentBody.innerHTML = html)
          .catch(() => {
            contentBody.innerHTML = `
              <div class="p-4 bg-blue-50 text-blue-800 rounded border border-blue-200">
                尚未建立 ${fileName}，請至 GitHub 上傳檔案。<br>
                <span class="text-xs text-gray-500">(${item.summary})</span>
              </div>`;
          });
      } else {
        // 其他預設
        contentBody.innerHTML = `
          <p class="text-lg text-gray-700 mb-4">${item.summary}</p>
          <div class="h-64 bg-gray-100 rounded-lg border border-dashed border-gray-300 flex items-center justify-center text-gray-400">
             這裡將顯示 ${item.label} 的詳細內容
          </div>
        `;
      }
    }

    // --- 懸浮廣告關閉功能 ---
    function closeAd() {
      const ad = document.getElementById('floating-ad');
      ad.classList.add('translate-y-40', 'opacity-0');
      setTimeout(() => {
        ad.classList.add('hidden');
      }, 300);
    }

    // 初始化
    renderNav();
    updateContent();
  </script>
</body>
</html>
